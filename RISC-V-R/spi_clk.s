(TpProg (TpModule (TpTask spiClk (sharp null) (paras (Port (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_clk (TpDim null) NullExp) (TpVarTp i_reset (TpDim null) NullExp) (TpVarTp i_tx_valid (TpDim null) NullExp) (TpVarTp o_tx_ready (TpDim null) NullExp) (TpVarTp o_spi_clk (TpDim null) NullExp))))) (parameters null) (localparam null) (ilists (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_clk (TpDim null) NullExp))) (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_reset (TpDim null) NullExp))) (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_tx_valid (TpDim null) NullExp)))) (iolists null) (olists (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp o_spi_clk (TpDim null) NullExp))) (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp o_tx_ready (TpDim null) NullExp)))) (sigset (Parameter (SignRng (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp SPI_MODE (TpDim null) (Atom (Int 0))))))) (Parameter (SignRng (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp CLKS_PER_HALF_BIT (TpDim null) (Atom (Int 2))))))) (Parameter (SignRng (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp DATAWIDTH (TpDim null) (Atom (Int 8))))))) (Input Nwire (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_clk (TpDim null) NullExp)))) (Input Nwire (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_reset (TpDim null) NullExp)))) (Input Nwire (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_tx_valid (TpDim null) NullExp)))) (Output Regtype (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp o_spi_clk (TpDim null) NullExp)))) (Output Regtype (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp o_tx_ready (TpDim null) NullExp)))) (Wire (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp w_CPOL (TpDim null) NullExp)))) (Wire (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp w_CPHA (TpDim null) NullExp))))) (body (Assign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var w_CPOL)) (Atom (Int 0)) NoDE)))) (Assign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var w_CPHA)) (Atom (Int 0)) NoDE)))) (Decl (Reg (TpSigDeclBody false NoDelay (RngC (Sub (Funcall (SimpFunCall (Sfname Clog2) (TpParaList (Pexp (Mul (Atom (Sym (Var CLKS_PER_HALF_BIT))) (Atom (Int 2))))))) (Atom (Int 1))) (Atom (Int 0))) (sharp (TpVarTp r_spi_clk_count (TpDim null) NullExp))))) (Decl (Reg (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp r_spi_clk (TpDim null) NullExp))))) (Decl (Reg (TpSigDeclBody false NoDelay (RngC (Atom (Int 4)) (Atom (Int 0))) (sharp (TpVarTp r_spi_clk_edges (TpDim null) NullExp))))) (Decl (Reg (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp r_leading_edge (TpDim null) NullExp))))) (Decl (Reg (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp r_trailing_edge (TpDim null) NullExp))))) (Assign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var o_spi_clk)) (Atom (Sym (Var r_spi_clk))) NoDE)))) (Always (TpEvent (Posedge (TpVarRange i_clk Rng0))) (body (Block null (body (If (Atom (Sym (Var i_reset))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var o_tx_ready)) (Atom (Num false 1 (Bin false 0))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk_edges)) (Atom (Num false 5 (Bin false 0))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_leading_edge)) (Atom (Num false 1 (Bin false 0))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_trailing_edge)) (Atom (Num false 1 (Bin false 0))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk)) (Atom (Sym (Var w_CPOL))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk_count)) (Atom (Int 0)) NoDE)))))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_leading_edge)) (Atom (Num false 1 (Bin false 0))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_trailing_edge)) (Atom (Num false 1 (Bin false 0))) NoDE)))) (If (Atom (Sym (Var i_tx_valid))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var o_tx_ready)) (Atom (Num false 1 (Bin false 0))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk_edges)) (Atom (Int 16)) NoDE)))))) (If (Gt (Atom (Sym (Var r_spi_clk_edges))) (Atom (Int 0))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var o_tx_ready)) (Atom (Num false 1 (Bin false 0))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk_edges)) (Sub (Atom (Sym (Var r_spi_clk_edges))) (Atom (Int 1))) NoDE)))) (If (Eq (Atom (Sym (Var r_spi_clk_count))) (Sub (Mul (Atom (Sym (Var CLKS_PER_HALF_BIT))) (Atom (Int 2))) (Atom (Int 1)))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_trailing_edge)) (Atom (Int 1)) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk_count)) (Atom (Int 0)) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk)) (Not (Atom (Sym (Var r_spi_clk)))) NoDE)))))) (If (Eq (Atom (Sym (Var r_spi_clk_count))) (Sub (Atom (Sym (Var CLKS_PER_HALF_BIT))) (Atom (Int 1)))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_leading_edge)) (Atom (Num false 1 (Bin false 1))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk_count)) (Add (Atom (Sym (Var r_spi_clk_count))) (Atom (Int 1))) NoDE)))) (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk)) (Not (Atom (Sym (Var r_spi_clk)))) NoDE)))))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var r_spi_clk_count)) (Add (Atom (Sym (Var r_spi_clk_count))) (Atom (Int 1))) NoDE)))))))))) (Block null (body (NbkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var o_tx_ready)) (Atom (Int 1)) NoDE)))))))))))))))) (macros (DefaultNettype Dnone)))) (TpModule (TpTask tb_clk (sharp null) (paras (Port (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp null)))) (parameters null) (localparam null) (ilists null) (iolists null) (olists null) (sigset (Reg (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_clk (TpDim null) NullExp)))) (Reg (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_reset (TpDim null) NullExp)))) (Reg (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i_tx_valid (TpDim null) NullExp)))) (Wire (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp o_spi_clk (TpDim null) NullExp)))) (Wire (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp o_tx_ready (TpDim null) NullExp)))) (Integer (TpSigDeclBody false NoDelay (RngC (Atom (Int 0)) (Atom (Int 0))) (sharp (TpVarTp i (TpDim null) NullExp))))) (body (Fcall (Invoked (Ufname (Var spiClk)) (Ord (TpParaList null)) (TpModuleInstances (TpModuleInstance (Ufname (Var SCK)) (TpParaList (Svar i_clk) (Svar i_reset) (Svar i_tx_valid) (Svar o_tx_ready) (Svar o_spi_clk)))))) (Initial (body (Block null (body (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_clk)) (Atom (Int 0)) NoDE)))) (Forever (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_clk)) (Not (Atom (Sym (Var i_clk)))) (Delay (IntDelay (Atom (Int 5))))))))))))) (Initial (body (Block null (body (DelayEvent (Delay (IntDelay (Atom (Int 0)))) (body (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_reset)) (Atom (Int 1)) NoDE)))) (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_tx_valid)) (Atom (Int 0)) NoDE)))))) (DelayEvent (Delay (IntDelay (Atom (Int 10)))) (body (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_reset)) (Atom (Int 0)) NoDE)))) (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_tx_valid)) (Atom (Int 1)) NoDE)))))) (DelayEvent (Delay (IntDelay (Atom (Int 10)))) (body (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_tx_valid)) (Atom (Int 0)) NoDE)))))) (For (TpForHead (TpEqAssigns (TpEqAssign (Lname (Var i)) (Atom (Int 0)) NoDE)) (Lt (Atom (Sym (Var i))) (Atom (Int 17))) (TpEqAssigns (TpEqAssign (Lname (Var i)) (Add (Atom (Sym (Var i))) (Atom (Int 1))) NoDE))) (Block null (body (DelayEvent (Event (TpEvent (Posedge (TpVarRange i_clk Rng0)))) (body (DelayEvent (Delay NoDelay) (body null))))))) (DelayEvent (Delay (IntDelay (Atom (Int 10)))) (body (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_tx_valid)) (Atom (Int 1)) NoDE)))))) (DelayEvent (Delay (IntDelay (Atom (Int 10)))) (body (BkAssign (TpAssign NoDE (TpEqAssigns (TpEqAssign (Lname (Var i_tx_valid)) (Atom (Int 0)) NoDE)))))) (For (TpForHead (TpEqAssigns (TpEqAssign (Lname (Var i)) (Atom (Int 0)) NoDE)) (Lt (Atom (Sym (Var i))) (Atom (Int 17))) (TpEqAssigns (TpEqAssign (Lname (Var i)) (Add (Atom (Sym (Var i))) (Atom (Int 1))) NoDE))) (Block null (body (DelayEvent (Event (TpEvent (Posedge (TpVarRange i_clk Rng0)))) (body (DelayEvent (Delay NoDelay) (body null))))))) (Fcall (SimpFunCall (Sfname Finish) (TpParaList null)))))))) (macros null))))
